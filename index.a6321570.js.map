{"mappings":"oeAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,S,uCAKA,MAAME,EAAqBC,SAASC,cAAc,gBAC5CC,EAAYF,SAASC,cAAc,gBACnCE,EAAUH,SAASC,cAAc,eACjCG,EAAgBJ,SAASC,cAAc,eAE7CF,EAAmBM,iBAAiB,UAEpC,SAA6BC,GAC3BA,EAAEC,iBACFH,EAAcI,UAAY,GAC1BN,EAAUM,UAAY,GACtB,MAAMC,EAAUH,EAAEI,cAAcC,YAAYC,MAAMC,OAClD,IAAKJ,EAEH,YADAX,EAAAgB,OAAOC,QAAQ,2BAOnBC,eAAiCP,EAASQ,GACxC,IACEd,EAAQe,QAAS,EACjB,MACEC,MAAQC,QAASC,EAAUC,cAAEA,UACrB,EAAAC,EAAAC,aAAYf,EAASQ,GAC/B,IAAKI,EAAWI,OAGd,OAFArB,EAAcI,UAAY,QAC1BV,EAAAgB,OAAOC,QAAQ,mBAIdO,EAAgB,IACjB,EAAAI,EAAAC,YAAWL,EAAeD,EAAYE,EAAAC,YAAaf,GAEnDL,EAAcI,UAAY,GAG5B,MAAMoB,GAAQ,EAAAC,EAAAC,sBAAqBT,GACnCnB,EAAUM,UAAYoB,EACtBzB,EAAQe,QAAS,C,CACjB,MAAOa,GACPjC,EAAAgB,OAAOC,QAAQgB,EAAMC,Q,CACtB,QACC7B,EAAQe,QAAS,C,EA3BnBe,CAAkBxB,E","sources":["src/index.js","src/js/search-films.js"],"sourcesContent":["import './js/main-initial-films';\nimport './js/search-films';\nimport './js/modal-film';\nimport './js/modal-team';\nimport './js/theme-switcher';\nimport './js/firebase';\nimport './js/auth';\nimport './js/button-up';\nimport './js/pagination'\n","import { Notify } from 'notiflix';\nimport { searchFilms } from './api';\nimport { createFilmItemMarkup } from './main-initial-films';\nimport { pagination } from './pagination';\n\nconst formSearchFilmsRef = document.querySelector('#search-form');\nconst filmsList = document.querySelector('.films__list');\nconst spinner = document.querySelector('.js-spinner');\nconst paginationRef = document.querySelector('#pagination')\n\nformSearchFilmsRef.addEventListener('submit', onSubmitFetchMovies);\n\nfunction onSubmitFetchMovies(e) {\n  e.preventDefault();\n  paginationRef.innerHTML = '';\n  filmsList.innerHTML = '';\n  const keyword = e.currentTarget.searchQuery.value.trim();\n  if (!keyword) {\n    Notify.failure('Please enter something');\n    return;\n  }\n\n  fetchFilmsByQuery(keyword);\n}\n\nasync function fetchFilmsByQuery(keyword, currentPage) {\n  try {\n    spinner.hidden = false;\n    const {\n      data: { results: filmsArray, total_results },\n    } = await searchFilms(keyword, currentPage);\n    if (!filmsArray.length) {\n      paginationRef.innerHTML = \"\"\n      Notify.failure('Films not found');\n      return;\n    }\n\n    if(total_results > 20) {\n      pagination(total_results, filmsArray, searchFilms, keyword);\n    } else {\n      paginationRef.innerHTML = \"\"\n    }\n\n    const items = createFilmItemMarkup(filmsArray);\n    filmsList.innerHTML = items;\n    spinner.hidden = true;\n  } catch (error) {\n    Notify.failure(error.message);\n  } finally {\n    spinner.hidden = true;\n  }\n}\n"],"names":["parcelRequire","$eWCmQ","$54bb0b2193848dde$var$formSearchFilmsRef","document","querySelector","$54bb0b2193848dde$var$filmsList","$54bb0b2193848dde$var$spinner","$54bb0b2193848dde$var$paginationRef","addEventListener","e","preventDefault","innerHTML","keyword","currentTarget","searchQuery","value","trim","Notify","failure","async","currentPage","hidden","data","results","filmsArray","total_results","$7rYDH","searchFilms","length","$2nhTy","pagination","items","$dxtdZ","createFilmItemMarkup","error","message","$54bb0b2193848dde$var$fetchFilmsByQuery"],"version":3,"file":"index.a6321570.js.map"}