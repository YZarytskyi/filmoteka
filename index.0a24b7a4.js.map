{"mappings":"iiBAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,S,iEAKME,EAAqBC,SAASC,cAAc,gBAC5CC,EAAYF,SAASC,cAAc,gBACnCE,EAAUH,SAASC,cAAc,eACjCG,EAAgBJ,SAASC,cAAc,e,SAiB9BI,I,OAAAA,EAAfC,EAAAR,EAAA,CAAAQ,EAAAC,GAAAC,MAAA,SAAAC,EAAiCC,EAASC,G,IAKlCC,EAAuCC,EADxBC,EAAYC,EAczBC,E,kFAhBNb,EAAQc,QAAS,E,UAGP,EAAAC,EAAAC,aAAYT,EAASC,G,UAA3BC,EAAuCQ,EAAAC,K,EAAvCT,EADFU,KAAQR,EAAmBD,EAAnBU,QAAqBR,EAAaF,EAAbE,cAE1BD,EAAWU,OAAM,C,uBACpBpB,EAAcqB,UAAY,GAC1BC,EAAAC,OAAOC,QAAQ,mB,2BAIdb,EAAgB,IACjB,EAAAc,EAAAC,YAAWf,EAAeD,EAAYI,EAAAC,YAAaT,GAEnDN,EAAcqB,UAAY,GAGtBT,GAAQ,EAAAe,EAAAC,sBAAqBlB,GACnCZ,EAAUuB,UAAYT,EACtBb,EAAQc,QAAS,E,kDAEjBS,EAAAC,OAAOC,QAAQR,EAAAa,GAAMC,S,yBAErB/B,EAAQc,QAAS,E,8EAxBWkB,MAAAC,KAAAC,U,CAfhCtC,EAAmBuC,iBAAiB,UAEpC,SAA6BC,GAC3BA,EAAEC,iBACFpC,EAAcqB,UAAY,GAC1BvB,EAAUuB,UAAY,GACtB,IAAMf,EAAU6B,EAAEE,cAAcC,YAAYC,MAAMC,OAClD,IAAKlC,EAEH,YADAgB,EAAAC,OAAOC,QAAQ,2B,SAOclB,EAASC,GAA3BN,EAAiB8B,MAAAC,KAAAC,U,CAH9BQ,CAAkBnC,E","sources":["src/index.js","src/js/search-films.js"],"sourcesContent":["import './js/main-initial-films';\nimport './js/search-films';\nimport './js/modal-film';\nimport './js/modal-team';\nimport './js/theme-switcher';\nimport './js/firebase';\nimport './js/auth';\nimport './js/button-up';\nimport './js/pagination'\n","import { Notify } from 'notiflix';\nimport { searchFilms } from './api';\nimport { createFilmItemMarkup } from './main-initial-films';\nimport { pagination } from './pagination';\n\nconst formSearchFilmsRef = document.querySelector('#search-form');\nconst filmsList = document.querySelector('.films__list');\nconst spinner = document.querySelector('.js-spinner');\nconst paginationRef = document.querySelector('#pagination')\n\nformSearchFilmsRef.addEventListener('submit', onSubmitFetchMovies);\n\nfunction onSubmitFetchMovies(e) {\n  e.preventDefault();\n  paginationRef.innerHTML = '';\n  filmsList.innerHTML = '';\n  const keyword = e.currentTarget.searchQuery.value.trim();\n  if (!keyword) {\n    Notify.failure('Please enter something');\n    return;\n  }\n\n  fetchFilmsByQuery(keyword);\n}\n\nasync function fetchFilmsByQuery(keyword, currentPage) {\n  try {\n    spinner.hidden = false;\n    const {\n      data: { results: filmsArray, total_results },\n    } = await searchFilms(keyword, currentPage);\n    if (!filmsArray.length) {\n      paginationRef.innerHTML = \"\"\n      Notify.failure('Films not found');\n      return;\n    }\n\n    if(total_results > 20) {\n      pagination(total_results, filmsArray, searchFilms, keyword);\n    } else {\n      paginationRef.innerHTML = \"\"\n    }\n\n    const items = createFilmItemMarkup(filmsArray);\n    filmsList.innerHTML = items;\n    spinner.hidden = true;\n  } catch (error) {\n    Notify.failure(error.message);\n  } finally {\n    spinner.hidden = true;\n  }\n}\n"],"names":["parcelRequire","$bpxeT","$c2d00dc5f3e94890$var$formSearchFilmsRef","document","querySelector","$c2d00dc5f3e94890$var$filmsList","$c2d00dc5f3e94890$var$spinner","$c2d00dc5f3e94890$var$paginationRef","$c2d00dc5f3e94890$var$_fetchFilmsByQuery","$parcel$interopDefault","$2TvXO","mark","_callee","keyword","currentPage","ref","_data","filmsArray","total_results","items","hidden","$b7ONl","searchFilms","_ctx","sent","data","results","length","innerHTML","$iU1Pc","Notify","failure","$jcFG7","pagination","$3mBsp","createFilmItemMarkup","t0","message","apply","this","arguments","addEventListener","e","preventDefault","currentTarget","searchQuery","value","trim","$c2d00dc5f3e94890$var$fetchFilmsByQuery"],"version":3,"file":"index.0a24b7a4.js.map"}